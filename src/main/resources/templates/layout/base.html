<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="en"
      th:fragment="base(pageTitle, content)">
<head>
    <meta charset="UTF-8" />
    <title th:replace="${pageTitle}">Finance Tracker</title>
    <script src="https://cdn.tailwindcss.com"></script>

    <script>
        tailwind.config = {
          darkMode: 'class',
          theme: {
            extend: {}
          }
        }
    </script>
</head>

<body class="bg-gray-100 min-h-screen dark:bg-slate-950 dark:text-slate-50">

<nav class="bg-white shadow-sm px-6 py-4 flex items-center justify-between
            dark:bg-slate-900 dark:text-slate-50">

    <!-- LOGO -->
    <a href="/" class="flex items-center gap-2">
        <!-- Light Mode Icon -->
        <img
                src="/assets/logo-light.png"
                alt="Finance Tracker Logo"
                class=" h-16 w-16 dark:hidden"
        />

        <!-- Dark Mode Icon -->
        <img
                src="/assets/logo-dark.png"
                alt="Finance Tracker Logo"
                class=" h-16 w-16 hidden dark:block"
        />

        <h3 class="bold">Finance Tracker</h3>
    </a>

    <div class="flex items-center gap-6">
        <a href="/" class="text-gray-600 hover:text-gray-900 dark:text-slate-300 dark:hover:text-white">
            Home
        </a>
        <a href="/import/" class="text-gray-600 hover:text-gray-900 dark:text-slate-300 dark:hover:text-white">
            Import
        </a>
    </div>

    <button
            id="theme-toggle"
            type="button"
            class="flex items-center gap-2 rounded-full border border-slate-300 px-3 py-1 text-xs font-medium
               bg-white text-slate-700 hover:bg-slate-100
               dark:bg-slate-800 dark:text-slate-100 dark:border-slate-600 dark:hover:bg-slate-700">
        <span id="theme-toggle-icon">ðŸŒ™</span>
        <span id="theme-toggle-label">Dark</span>
    </button>
</nav>

<main class="px-6 py-8">
    <div class="max-w-5xl mx-auto">
        <th:block th:replace="${content}">
            <p class="text-gray-500">No content provided</p>
        </th:block>
    </div>
</main>

<script>
    (function () {
      const root = document.documentElement; // <html>
      const toggleBtn = document.getElementById('theme-toggle');
      const iconSpan = document.getElementById('theme-toggle-icon');
      const labelSpan = document.getElementById('theme-toggle-label');

      // 1ï¸âƒ£ Cek preferensi di localStorage
      const storedTheme = localStorage.getItem('theme');

      if (storedTheme === 'dark') {
        root.classList.add('dark');
      } else if (storedTheme === 'light') {
        root.classList.remove('dark');
      } else {
        // 2ï¸âƒ£ Kalo ga ada di localStorage, fallback ke OS
        if (window.matchMedia &&
            window.matchMedia('(prefers-color-scheme: dark)').matches) {
          root.classList.add('dark');
        } else {
          root.classList.remove('dark');
        }
      }

      // Update tampilan icon + teks
      function syncButtonUI() {
        const isDark = root.classList.contains('dark');
        if (isDark) {
          iconSpan.textContent = 'â˜€ï¸';
          labelSpan.textContent = 'Light';
        } else {
          iconSpan.textContent = 'ðŸŒ™';
          labelSpan.textContent = 'Dark';
        }
      }

      syncButtonUI();

      // 3ï¸âƒ£ Event: kalau tombol di-klik â†’ toggle theme + simpen ke localStorage
      if (toggleBtn) {
        toggleBtn.addEventListener('click', () => {
          const isDarkNow = root.classList.toggle('dark');
          localStorage.setItem('theme', isDarkNow ? 'dark' : 'light');
          syncButtonUI();
        });
      }
    })();



</script>

</body>
</html>
